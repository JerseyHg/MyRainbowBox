<view class="page">
  <!-- 加载中 -->
  <view class="loading-wrap" wx:if="{{loading}}">
    <text class="loading-emoji">🌈</text>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 未提交资料 -->
  <view wx:elif="{{!hasProfile}}">
    <view class="empty-card">
      <text class="empty-emoji">📝</text>
      <text class="empty-title">您尚未提交资料</text>
      <text class="empty-desc">填写个人资料，开始你的彩虹之旅</text>
      <button class="btn-primary" bindtap="goFillProfile">去填写资料</button>
    </view>
  </view>

  <!-- 已提交 - 显示状态 -->
  <view wx:else>
    <!-- 状态卡片 -->
    <view class="status-card" style="background: {{statusBg}};">
      <text class="status-emoji">{{statusEmoji}}</text>
      <text class="status-label" style="color: {{statusColor}};">{{statusLabel}}</text>
      <text class="status-desc">{{statusDesc}}</text>
      <view class="serial-badge" wx:if="{{serialNumber}}">
        <text class="serial-text">编号 №{{serialNumber}}</text>
      </view>
    </view>

    <!-- 拒绝原因 -->
    <view class="card reject-card" wx:if="{{status === 'rejected' && rejectionReason}}">
      <text class="card-title">未通过原因</text>
      <text class="reject-reason">{{rejectionReason}}</text>
      <button class="btn-primary" style="margin-top: 24rpx;" bindtap="goEditProfile">修改资料并重新提交</button>
    </view>

    <!-- 信息概览 -->
    <view class="card">
      <text class="card-title">资料信息</text>
      <view class="info-row">
        <text class="info-label">提交时间</text>
        <text class="info-value">{{createTime}}</text>
      </view>
      <view class="info-row" wx:if="{{publishedAt}}">
        <text class="info-label">发布时间</text>
        <text class="info-value">{{publishedAt}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">当前状态</text>
        <text class="info-value" style="color: {{statusColor}};">{{statusLabel}}</text>
      </view>
    </view>

    <!-- 邀请码入口（审核通过后才显示） -->
    <view class="card action-card" wx:if="{{status === 'approved' || status === 'published'}}" bindtap="goMyCodes">
      <view class="action-left">
        <text class="action-emoji">🎫</text>
        <view class="action-info">
          <text class="action-title">我的邀请码</text>
          <text class="action-desc">你有 {{invitationQuota}} 个邀请名额</text>
        </view>
      </view>
      <text class="action-arrow">›</text>
    </view>

    <!-- 提示 -->
    <view class="tips-card" wx:if="{{status === 'pending'}}">
      <text class="tips-title">温馨提示</text>
      <text class="tips-text">• 审核通常在 1-3 个工作日内完成</text>
      <text class="tips-text">• 审核通过后将发布到公众号</text>
      <text class="tips-text">• 同时会获得专属邀请码</text>
    </view>

    <!-- 退出登录 -->
    <view class="logout-wrap">
      <button class="btn-logout" bindtap="onLogout">退出登录</button>
    </view>
  </view>
</view>
